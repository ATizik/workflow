<!DOCTYPE html>
<html lang="en">
  <head>
    <title>RenderContext Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144488214-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-144488214-1');
</script>
  </head>
  <body>
    <a name="//apple_ref/swift/Class/RenderContext" class="dashAnchor"></a>
    <a title="RenderContext Class Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html"> Docs</a> (100% documented)</p>
        <p class="header-right"><a href="https://github.com/square/workflow"><img src="../img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html"> Reference</a>
        <img id="carat" src="../img/carat.png" />
        RenderContext Class Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/RenderContext.html">RenderContext</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/WorkflowHost.html">WorkflowHost</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/AnyWorkflowConvertible.html">AnyWorkflowConvertible</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/Worker.html">Worker</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/Workflow.html">Workflow</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/WorkflowAction.html">WorkflowAction</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/WorkflowDebugger.html">WorkflowDebugger</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Structs/AnyWorkflow.html">AnyWorkflow</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/AnyWorkflowAction.html">AnyWorkflowAction</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/Sink.html">Sink</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/WorkflowHierarchyDebugSnapshot.html">WorkflowHierarchyDebugSnapshot</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/WorkflowHierarchyDebugSnapshot/Child.html">– Child</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/WorkflowUpdateDebugInfo.html">WorkflowUpdateDebugInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/WorkflowUpdateDebugInfo/Kind.html">– Kind</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/WorkflowUpdateDebugInfo/Source.html">– Source</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>RenderContext</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">RenderContext</span><span class="o">&lt;</span><span class="kt">WorkflowType</span><span class="o">&gt;</span> <span class="p">:</span> <span class="kt">RenderContextType</span> <span class="k">where</span> <span class="kt">WorkflowType</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/Workflow.html">Workflow</a></span></code></pre>

                </div>
              </div>
            <p><code>RenderContext</code> is the composition point for the workflow tree.</p>

<p>During a render pass, a workflow may want to defer to a child
workflow to render some portion of its content. For example,
a workflow that renders to a split-screen view model might
delegate to child A for the left side, and child B for the right
side view models. Nesting allows for a fractal tree that is constructed
out of many small parts.</p>

<p>If a parent wants to delegate to a child workflow, it must first
create an instance of that workflow. This can be thought of as the
model of the child workflow. It does not contain any active state,
it simply contains the data necessary to create or update a workflow
node.</p>

<p>The parent then calls <code>render(workflow:outputMap:)</code>
with two values:</p>

<ul>
<li>The child workflow.</li>
<li>A closure that transforms the child&rsquo;s output events into the parent&rsquo;s
<code>Event</code> type so that the parent can respond to events generated by
the child.</li>
</ul>

<p>If the parent had previously rendered a child of the same type, the existing
child workflow node is updated.</p>

<p>If the parent had not rendered a child of the same type in the previous
render pass, a new child workflow node is generated.</p>

<p>The infrastructure then performs a render pass on the child to obtain its
<code>Rendering</code> value, which is then returned to the caller.</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8Workflow13RenderContextC6render8workflow3key9outputMap9RenderingQyd__qd___SSqd_0_6OutputQyd__ct0A4TypeQyd_0_RszA2ARd__AA0A6ActionRd_0_r0_lF"></a>
                    <a name="//apple_ref/swift/Method/render(workflow:key:outputMap:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8Workflow13RenderContextC6render8workflow3key9outputMap9RenderingQyd__qd___SSqd_0_6OutputQyd__ct0A4TypeQyd_0_RszA2ARd__AA0A6ActionRd_0_r0_lF">render(workflow:key:outputMap:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Creates or updates a child workflow of the given type, performs a render
pass, and returns the result.</p>

<p>Note that it is a programmer error to render two instances of a given workflow type with the same <code>key</code>
during the same render pass.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">render</span><span class="o">&lt;</span><span class="kt">Child</span><span class="p">,</span> <span class="kt">Action</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">workflow</span><span class="p">:</span> <span class="kt">Child</span><span class="p">,</span> <span class="nv">key</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">outputMap</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">Child</span><span class="o">.</span><span class="kt">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Child</span><span class="o">.</span><span class="kt">Rendering</span> <span class="k">where</span> <span class="kt">Child</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/Workflow.html">Workflow</a></span><span class="p">,</span> <span class="kt">Action</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/WorkflowAction.html">WorkflowAction</a></span><span class="p">,</span> <span class="kt">WorkflowType</span> <span class="o">==</span> <span class="kt">Action</span><span class="o">.</span><span class="kt">WorkflowType</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>workflow</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The child workflow to be rendered.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>outputMap</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>A closure that transforms the child&rsquo;s output type into <code>Action</code>.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>key</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>A string that uniquely identifies this child.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>The <code>Rendering</code> result of the child&rsquo;s <code>render</code> method.</p>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8Workflow13RenderContextC8makeSink2ofAA0E0Vyqd__Gqd__m_t0A4TypeQyd__RszAA0A6ActionRd__lF"></a>
                    <a name="//apple_ref/swift/Method/makeSink(of:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8Workflow13RenderContextC8makeSink2ofAA0E0Vyqd__Gqd__m_t0A4TypeQyd__RszAA0A6ActionRd__lF">makeSink(of:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">makeSink</span><span class="o">&lt;</span><span class="kt">Action</span><span class="o">&gt;</span><span class="p">(</span><span class="n">of</span> <span class="nv">actionType</span><span class="p">:</span> <span class="kt">Action</span><span class="o">.</span><span class="k">Type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/Sink.html">Sink</a></span><span class="o">&lt;</span><span class="kt">Action</span><span class="o">&gt;</span> <span class="k">where</span> <span class="kt">WorkflowType</span> <span class="o">==</span> <span class="kt">Action</span><span class="o">.</span><span class="kt">WorkflowType</span><span class="p">,</span> <span class="kt">Action</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/WorkflowAction.html">WorkflowAction</a></span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8Workflow13RenderContextC9subscribe6signaly13ReactiveSwift6SignalCyqd__6Result7NoErrorOG_t0A4TypeQyd__RszAA0A6ActionRd__lF"></a>
                    <a name="//apple_ref/swift/Method/subscribe(signal:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8Workflow13RenderContextC9subscribe6signaly13ReactiveSwift6SignalCyqd__6Result7NoErrorOG_t0A4TypeQyd__RszAA0A6ActionRd__lF">subscribe(signal:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">subscribe</span><span class="o">&lt;</span><span class="kt">Action</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">signal</span><span class="p">:</span> <span class="kt">Signal</span><span class="o">&lt;</span><span class="kt">Action</span><span class="p">,</span> <span class="kt">NoError</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">where</span> <span class="kt">WorkflowType</span> <span class="o">==</span> <span class="kt">Action</span><span class="o">.</span><span class="kt">WorkflowType</span><span class="p">,</span> <span class="kt">Action</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/WorkflowAction.html">WorkflowAction</a></span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8Workflow13RenderContextC11awaitResult3for9outputMapyqd___qd_0_6OutputQyd__ct0A4TypeQyd_0_RszAA6WorkerRd__AA0A6ActionRd_0_r0_lF"></a>
                    <a name="//apple_ref/swift/Method/awaitResult(for:outputMap:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8Workflow13RenderContextC11awaitResult3for9outputMapyqd___qd_0_6OutputQyd__ct0A4TypeQyd_0_RszAA6WorkerRd__AA0A6ActionRd_0_r0_lF">awaitResult(for:outputMap:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">awaitResult</span><span class="o">&lt;</span><span class="kt">W</span><span class="p">,</span> <span class="kt">Action</span><span class="o">&gt;</span><span class="p">(</span><span class="k">for</span> <span class="nv">worker</span><span class="p">:</span> <span class="kt">W</span><span class="p">,</span> <span class="nv">outputMap</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">W</span><span class="o">.</span><span class="kt">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Action</span><span class="p">)</span> <span class="k">where</span> <span class="kt">W</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/Worker.html">Worker</a></span><span class="p">,</span> <span class="kt">Action</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/WorkflowAction.html">WorkflowAction</a></span><span class="p">,</span> <span class="kt">WorkflowType</span> <span class="o">==</span> <span class="kt">Action</span><span class="o">.</span><span class="kt">WorkflowType</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8Workflow13RenderContextC8makeSink2of7onEventAA0E0Vyqd__Gqd__m_6OutputQzSgqd___5StateQzztctlF"></a>
                    <a name="//apple_ref/swift/Method/makeSink(of:onEvent:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8Workflow13RenderContextC8makeSink2of7onEventAA0E0Vyqd__Gqd__m_6OutputQzSgqd___5StateQzztctlF">makeSink(of:onEvent:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">makeSink</span><span class="o">&lt;</span><span class="kt">Event</span><span class="o">&gt;</span><span class="p">(</span><span class="n">of</span> <span class="nv">eventType</span><span class="p">:</span> <span class="kt">Event</span><span class="o">.</span><span class="k">Type</span><span class="p">,</span> <span class="nv">onEvent</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">Event</span><span class="p">,</span> <span class="k">inout</span> <span class="kt">WorkflowType</span><span class="o">.</span><span class="kt">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">WorkflowType</span><span class="o">.</span><span class="kt">Output</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/Sink.html">Sink</a></span><span class="o">&lt;</span><span class="kt">Event</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8Workflow13RenderContextC11awaitResult3foryqd___t6Output_0A4TypeQYd__RszAA6WorkerRd__AA0A6ActionAFRpd__lF"></a>
                    <a name="//apple_ref/swift/Method/awaitResult(for:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8Workflow13RenderContextC11awaitResult3foryqd___t6Output_0A4TypeQYd__RszAA6WorkerRd__AA0A6ActionAFRpd__lF">awaitResult(for:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">awaitResult</span><span class="o">&lt;</span><span class="kt">W</span><span class="o">&gt;</span><span class="p">(</span><span class="k">for</span> <span class="nv">worker</span><span class="p">:</span> <span class="kt">W</span><span class="p">)</span> <span class="k">where</span> <span class="kt">WorkflowType</span> <span class="o">==</span> <span class="kt">W</span><span class="o">.</span><span class="kt">Output</span><span class="o">.</span><span class="kt">WorkflowType</span><span class="p">,</span> <span class="kt">W</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/Worker.html">Worker</a></span><span class="p">,</span> <span class="kt">W</span><span class="o">.</span><span class="kt">Output</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/WorkflowAction.html">WorkflowAction</a></span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8Workflow13RenderContextC11awaitResult3for8onOutputyqd___0H0QzSgAGQyd___5StateQzztctAA6WorkerRd__lF"></a>
                    <a name="//apple_ref/swift/Method/awaitResult(for:onOutput:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8Workflow13RenderContextC11awaitResult3for8onOutputyqd___0H0QzSgAGQyd___5StateQzztctAA6WorkerRd__lF">awaitResult(for:onOutput:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">awaitResult</span><span class="o">&lt;</span><span class="kt">W</span><span class="o">&gt;</span><span class="p">(</span><span class="k">for</span> <span class="nv">worker</span><span class="p">:</span> <span class="kt">W</span><span class="p">,</span> <span class="nv">onOutput</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">W</span><span class="o">.</span><span class="kt">Output</span><span class="p">,</span> <span class="k">inout</span> <span class="kt">WorkflowType</span><span class="o">.</span><span class="kt">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">WorkflowType</span><span class="o">.</span><span class="kt">Output</span><span class="p">?)</span> <span class="k">where</span> <span class="kt">W</span><span class="p">:</span> <span class="kt"><a href="../Protocols/Worker.html">Worker</a></span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2019 <a class="link" href="https://developer.squareup.com" target="_blank" rel="external">Square</a>. All rights reserved. (Last updated: 2019-07-23)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.10.0</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
